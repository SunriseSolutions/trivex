<div class="header pb-8 pt-lg-8 pt-md-8 d-flex align-items-center"
     style="min-height: 600px; background-image: url(assets/img/theme/profile-cover.jpg); background-size: cover; background-position: center top;">
  <!-- Mask -->
  <span class="mask bg-gradient-danger opacity-8"></span>
  <!--  <div class="container w-100 text-center mt-8 mt-md-0">-->
  <!--    <div *ngIf="error && !loading"  class="card">-->
  <!--      <div class="card-body">-->
  <!--        <h1>-->
  <!--          {{error}}-->
  <!--        </h1>-->
  <!--      </div>-->
  <!--    </div>-->
  <!--    <img *ngIf="loading" src="/assets/img-process/loading.gif" height="150px" alt="">-->
  <!--  </div>-->
  <div *ngIf="!error && !loading" class="container w-100 mt-8 mt-md-0">
    <div class="row d-flex flex-row align-items-center justify-content-between">
      <div class="col-12" *ngIf="!isAdmin">
          <div *ngIf="success" class="h3 text-white-no-longer">
            <p for="">You have successfully posted your message.</p>
            <button (click)="cancel()" class="btn btn-info">Post another
              message
            </button>
          </div>
          <div *ngIf="!success" class="col-12">
            <div class="card">
              <div class="card-body container">
                <div class="row">
                  <div class="col-12 flex-center">
                    <div class="row">
                      <div class="col-6 form-group">
                        <h2 class="text-center">Free from (time)</h2>

                      </div>
                      <div class="col-6 form-group">
                        <h2 class="text-center">To (time)</h2>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-6 form-group">
                        <input *ngIf="isIOS()" class="form-control p-2" autocomplete="off" [(ngModel)]="time.fromTime"
                               name="fromAt" atp-time-picker placeholder="Time picker"/>
                        <input *ngIf="!isIOS()" class="form-control p-2" autocomplete="off" [(ngModel)]="time.fromTime"
                               name="fromAt" type="time" placeholder="Time picker"/>
                        <!--                      <hr>-->
                        <!--                      <pre>Selected time: {{fromTime | json}}</pre>-->
                      </div>
                      <div class="col-6 form-group">
                        <input *ngIf="isIOS()" class="form-control p-2" autocomplete="off" [(ngModel)]="time.toTime"
                               name="toAt" atp-time-picker placeholder="Time picker"/>
                        <input *ngIf="!isIOS()" class="form-control p-2" autocomplete="off" [(ngModel)]="time.toTime"
                               name="toAt" type="time" placeholder="Time picker"/>
                      </div>
                    </div>
                    <hr>
                    <h2>On what day(s)</h2>
                    <div class="flex-column d-flex">
                      <div class="btn-group btn-group-toggle justify-content-center">
                        <label class="btn-primary flex-grow-1" ngbButtonLabel>
                          <input type="checkbox" ngbButton [(ngModel)]="day.monday"> MON
                          <span class="fas" [ngClass]="{'fa-check-circle': day.monday && onEdit}"></span>
                        </label>
                        <label class="btn-primary flex-grow-1" ngbButtonLabel>
                          <input type="checkbox" ngbButton [(ngModel)]="day.tuesday"> TUE
                          <span class="fas" [ngClass]="{'fa-check-circle': day.tuesday && onEdit}"></span>
                        </label>
                        <label class="btn-primary" ngbButtonLabel>
                          <input type="checkbox" ngbButton [(ngModel)]="day.wednesday"> WED
                          <span class="fas" [ngClass]="{'fa-check-circle': day.wednesday && onEdit}"></span>
                        </label>
                      </div>
                      <div class="btn-group btn-group-toggle mt-1 justify-content-center">
                        <label class="btn-primary flex-grow-1" ngbButtonLabel>
                          <input type="checkbox" ngbButton [(ngModel)]="day.thursday"> THUR
                          <span class="fas" [ngClass]="{'fa-check-circle': day.thursday && onEdit}"></span>
                        </label>
                        <label class="btn-primary flex-grow-1" ngbButtonLabel>
                          <input type="checkbox" ngbButton [(ngModel)]="day.friday"> FRI
                          <span class="fas" [ngClass]="{'fa-check-circle': day.friday && onEdit}"></span>
                        </label>
                        <label class="btn-primary flex-grow-1" ngbButtonLabel>
                          <input type="checkbox" ngbButton [(ngModel)]="day.saturday"> SAT
                          <span class="fas" [ngClass]="{'fa-check-circle': day.saturday && onEdit}"></span>
                        </label>
                      </div>
                      <div class="btn-group btn-group-toggle mt-1 justify-content-center">
                        <label class="btn-primary flex-grow-1" ngbButtonLabel>
                          <input type="checkbox" ngbButton [(ngModel)]="day.sunday"> SUNDAY
                          <span class="fas" [ngClass]="{'fa-check-circle': day.sunday && onEdit}"></span>
                        </label>
                      </div>
                    </div>
                    <hr>
                    <div class="row">
                      <div class="col-12 form-group">
                        <h2>Effective from</h2>
                        <div class="input-group input-group-alternative">
                          <div class="input-group-prepend">
                            <span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
                          </div>
                          <!--                        <input-->
                          <!--                            #effectiveFromIpt-->
                          <!--                            class="form-control p-2 datepicker"-->
                          <!--                            placeholder="Effective from"-->
                          <!--                            name="dob"-->
                          <!--                            [(ngModel)]="effectiveFrom"-->
                          <!--                            ngbDatepicker-->
                          <!--                            #d="ngbDatepicker"-->
                          <!--                            [maxDate]="{ year: date.year-15, month: 12, day: 31 }"-->
                          <!--                            [minDate]="{ year: date.year-80, month: 01, day: 01 }"-->
                          <!--                            [startDate]="{ year: date.year-21, month: 01 }"-->
                          <!--                            (click)="d.toggle()"-->
                          <!--                            type="text"-->
                          <!--                        />-->
                          <input class="form-control p-2" placeholder="Effective Date" type="date"
                                 [(ngModel)]="form.effectiveFrom"/>
                        </div>
                      </div>
                      <div class="col-12 form-group">
                        <h2>Expire On</h2>
                        <div class="input-group input-group-alternative">
                          <div class="input-group-prepend">
                            <span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
                          </div>
                          <!--                        <input-->
                          <!--                            #expireOnIpt-->
                          <!--                            class="form-control p-2 datepicker"-->
                          <!--                            placeholder="Expired on"-->
                          <!--                            name="dob"-->
                          <!--                            [(ngModel)]="expireOn"-->
                          <!--                            ngbDatepicker-->
                          <!--                            #d="ngbDatepicker"-->
                          <!--                            [maxDate]="{ year: date.year-15, month: 12, day: 31 }"-->
                          <!--                            [minDate]="{ year: date.year-80, month: 01, day: 01 }"-->
                          <!--                            [startDate]="{ year: date.year-21, month: 01 }"-->
                          <!--                            (click)="d.toggle()"-->
                          <!--                            type="text"-->
                          <!--                        />-->
                          <input [(ngModel)]="form.expireAt" class="form-control p-2" type="date"
                                 placeholder="Expiry Date"/>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <label (click)="checkForm(time, day, form)" class="btn-primary btn form-control flex-grow-1"
                           ngbButtonLabel>
                      <a class="w-100" ngbButton>Submit</a>
                    </label>
                    <label *ngIf="onEdit" (click)="cancel()" class="btn-primary btn form-control flex-grow-1"
                           ngbButtonLabel>
                      <a class="w-100" ngbButton>Cancel</a>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
      </div>
      <div class="col-12 mt-1">
        <h1>Free-on Messages <a *ngIf="isAdmin" href="{{getDownloadUrl()}}"
                                class="fa fa-download  icon-hover cursor-pointer mx-2 text-primary"></a>
        </h1>
        <div *ngFor="let data of availabilityMessage" class="card my-2">
          <div class="card-header p-2 text-center">
            <h2 *ngIf="data.freeOnMondays" class="font-weight-bold badge bg-success text-light mr-2">Monday</h2>
            <h2 *ngIf="data.freeOnTuesdays" class="font-weight-bold badge bg-success text-light mr-2">Tuesday</h2>
            <h2 *ngIf="data.freeOnWednesdays" class="font-weight-bold badge bg-success text-light mr-2">Wednesday</h2>
            <h2 *ngIf="data.freeOnThursdays" class="font-weight-bold badge bg-success text-light mr-2">Thursday</h2>
            <h2 *ngIf="data.freeOnFridays" class="font-weight-bold badge bg-success text-light mr-2">Friday</h2>
            <h2 *ngIf="data.freeOnSaturdays" class="font-weight-bold badge bg-success text-light mr-2">Saturday</h2>
            <h2 *ngIf="data.freeOnSundays" class="font-weight-bold badge bg-success text-light">Sunday</h2>
          </div>
          <div class="card-body container">
            <div class="row">
              <div class="col-12 col-md-6">
                <div *ngIf="isAdmin" class="form-group">
                  <label class="font-weight-bold" for="">From Member: <span
                    class="text-muted">{{data.sender.personData.givenName}} {{data.sender.personData.familyName}}</span>
                  </label>
                </div>
                <div class="form-group">
                  <label class="font-weight-bold" for="">From Time: <span
                    class="text-muted">{{((data.fromHour.toString() === 1) ? '0' + data.fromHour : data.fromHour)}}
                    :{{((data.fromMinute.toString().length === 1) ? '0' + data.fromMinute : data.fromMinute)}}</span>
                  </label>
                </div>
                <div class="form-group">
                  <label class="font-weight-bold" for="">To Time: <span
                    class="text-muted">{{((data.toHour.toString() === 1) ? '0' + data.toHour : data.toHour)}}
                    :{{((data.toMinute.toString().length === 1) ? '0' + data.toMinute : data.toMinute)}}</span>
                  </label>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <div class="form-group">
                  <label class="font-weight-bold" for="">Effective From: <span
                    class="text-muted text-truncate">{{data.effectiveFrom | date: 'mediumDate'}}</span>
                  </label>
                </div>
                <div class="form-group">
                  <label class="font-weight-bold" for="">Expire On: <span
                    class="text-muted text-truncate">{{data.expireAt | date: 'mediumDate'}}</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="card-footer">
            <div class="row">
              <div *ngIf="!isAdmin" class="col-12 col-md-6">
                <a (click)="editMessage(data)" class="btn btn-primary w-100 text-light">EDIT</a>
              </div>
              <div class="col-12 col-md-6 mt-2 mt-md-0">
                <a (click)="deleteMessage(data['@id'])" class="btn btn-danger w-100 text-light">DELETE</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
